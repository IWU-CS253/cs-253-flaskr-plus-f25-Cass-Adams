{% extends "layout.html" %}
{% block body %}
    <div class="container col-sm">
  <form action="{{ url_for('add_entry') }}" method="post" class="add-entry">

    <dl>
        <div class="mb-3">
      <dt class="form-label">Title:
      <dd><input type="text" size="30" name="title" class="form-control">
        </dd></div>
        <div class="mb-3">
      <dt class="form-label">Category:
      <dd><input type="text" size="30" name="category" class="form-control">
            </dd></div>
        <div class="mb-3">
      <dt class="form-label">Text:
      <dd><textarea name="text" rows="5" cols="40" class="form-control"></textarea>
        </dd></div>
        <dd><input type="submit" value="Share" class="btn btn-primary"></dd>
    </dl>
  </form>
    </div>
  <form action="{{ url_for('filter_entries') }}" method="post">
   <dl>
    <dt>Category search:
        <select name="category" class="form-select">
        {% for entry in entries %}
            <dd><option value="{{ entry.category }}">{{ entry.category }}</option></dd>
        {% endfor %}
        </select>
       <dd><input type="submit" value="Search" class="btn btn-success"></dd>
   </dl>
  </form>

  <form action="{{ url_for('show_entries') }}" class="show-entries">
    <dl>
        <dt><input type="submit" value="See all posts" class="btn btn-info">
    </dl>
  </form>
  <ul class="entries">
  {% for entry in entries %}
          <li><h2>{{ entry.title }}</h2><h3>{{ entry.category }}</h3>{{ entry.text|safe }}</li>
      <div class="row row-cols-auto">
      <div class="col">
      <form action="{{ url_for('delete_entry') }}" method="post"><button type="submit" name="delete_button" value="{{ entry.text }}" class="btn btn-danger">Delete</button></form>
      </div>
      <div class="col">
      <form action="{{ url_for('edit_entry') }}" method="post"><button type="submit" name="edit_button" value="{{ entry.text }}" class="btn btn-warning">Edit</button></form>
      </div>
      </div>
  {% else %}
    <li><em>Unbelievable.  No entries here so far</em></li>
  {% endfor %}
  </ul>
{% endblock %}
